Excellent rappel ğŸ‘ â€” câ€™est exactement la posture dâ€™un vrai formateur :

> On enseigne **Ã  des esprits curieux**, pas Ã  des doigts qui tapent du code.

Voici donc le **TP3 â€“ Les vues**, dans la continuitÃ© naturelle du TP2 : humain, logique, clair, progressif, sans infantilisation, mais avec le *â€œpourquoiâ€* Ã  chaque Ã©tape.  
Aucun copier-coller aveugle : tout est raisonnÃ©, expliquÃ© et anticipÃ©.

---

# ğŸ“ TP3 â€” Les vues : sÃ©parer la logique du visuel

---

## ğŸ¯ Objectifs du TP

Ã€ la fin de ce TP, vous serez capables de :

- Comprendre **pourquoi il faut sÃ©parer le code PHP (logique)** du **HTML (prÃ©sentation)**.

- CrÃ©er un systÃ¨me de **vues rÃ©utilisables** (fichiers `.php` contenant du HTML).

- Utiliser une fonction simple `render()` pour afficher les vues de maniÃ¨re Ã©lÃ©gante.

- PrÃ©parer le terrain pour lâ€™architecture MVC sans encore parler de classes.

---

## ğŸ§­ 1. Avant de coder : pourquoi parler de â€œvuesâ€ ?

### ğŸ’¡ 1.1. Le problÃ¨me actuel

Dans le TP2, tout le contenu HTML Ã©tait *mÃ©langÃ©* avec le code PHP :

```php
echo "<h1>ğŸ  Accueil</h1><p>Bienvenue sur notre site !</p>";
```

Câ€™est simple pour une dÃ©monstration,  
mais totalement ingÃ©rable dÃ¨s quâ€™on a :

- du contenu long,

- du CSS,

- des balises HTML rÃ©pÃ©titives (header/footer),

- ou plusieurs dÃ©veloppeurs sur le mÃªme projet.

RÃ©sultat :

> on se retrouve avec du code spaghetti â€” un mÃ©lange indigeste de logique et de prÃ©sentation.

---

### ğŸ’¡ 1.2. Le concept des vues

Une **vue** (ou *view*) est un fichier dÃ©diÃ© Ã  lâ€™affichage du contenu.  
Elle contient principalement du **HTML**, parfois avec un peu de **PHP dâ€™affichage** (`<?= ... ?>`).

Le rÃ´le de la vue :

> Montrer les donnÃ©es, pas les calculer.

Câ€™est exactement ce que fait un chef dans une cuisine bien organisÃ©e :  
il ne mÃ©lange pas les Ã©pices, la vaisselle et le carnet de commandes.  
Chacun a son poste.

---

### ğŸ’¡ 1.3. Pourquoi cette sÃ©paration est cruciale

| Aspect        | Sans vues        | Avec vues                                                   |
| ------------- | ---------------- | ----------------------------------------------------------- |
| LisibilitÃ©    | Tout est mÃ©langÃ© | Logique et prÃ©sentation sÃ©parÃ©es                            |
| Maintenance   | Difficile        | Simple : on modifie la vue sans toucher Ã  la logique        |
| Collaboration | Un enfer         | Le dÃ©veloppeur et le designer peuvent travailler sÃ©parÃ©ment |
| RÃ©utilisation | Impossible       | Facile (layout, sections communes, etc.)                    |

---

## ğŸ§© 2. PrÃ©paration du projet

Structurez votre dossier ainsi :

```
tp3-views/
â”œâ”€â”€ public/
â”‚   â””â”€â”€ index.php
â””â”€â”€ views/
    â”œâ”€â”€ home.php
    â”œâ”€â”€ contact.php
    â”œâ”€â”€ profil.php
    â””â”€â”€ 404.php
```

---

## âš™ï¸ 3. Les fichiers de vues

> CrÃ©er le fichier **views/home.php** :
> 
> ```html
> <h1>ğŸ  Accueil</h1>
> <p>Bienvenue sur notre site dâ€™exemple.</p>
> ```

> CrÃ©er le fichier **views/contact.php** :
> 
> ```html
> <h1>ğŸ“ Contact</h1>
> <p>Vous pouvez nous Ã©crire Ã  <strong>contact@monsite.com</strong>.</p>
> ```

> CrÃ©er le fichier **views/profil.php** :
> 
> ```html
> <h1>ğŸ‘¤ Profil utilisateur</h1>
> <p>Nom : <strong>Jean Dupont</strong></p>
> ```

> CrÃ©er le fichier **views/404.php** :
> 
> ```html
> <h1>âŒ 404</h1>
> <p>La page demandÃ©e nâ€™existe pas.</p>
> ```

---

## âš™ï¸ 4. Le routeur rÃ©utilisÃ© avec les vues

> CrÃ©er le fichier **public/index.php** :
> 
> ```php
> <?php
> // RÃ©cupÃ¨re le chemin demandÃ©
> $uri = parse_url($_SERVER['REQUEST_URI'], PHP_URL_PATH);
> 
> // Associe les routes Ã  leurs vues correspondantes
> $routes = [
>     '/'         => 'views/home.php',
>     '/contact'  => 'views/contact.php',
>     '/profil'   => 'views/profil.php'
> ];
> 
> if (array_key_exists($uri, $routes)) {
>     include $routes[$uri];
> } else {
>     http_response_code(404);
>     include 'views/404.php';
> }
> ```

ğŸ’¬ **Explication :**

- Le tableau `$routes` associe chaque chemin Ã  un fichier vue.

- `include` insÃ¨re le contenu HTML du fichier correspondant.

- Si le chemin nâ€™existe pas, on inclut la vue `404.php`.

---

## âš™ï¸ 5. AmÃ©liorer le code avec une fonction `render()`

Ã‰vitons les `include` rÃ©pÃ©titifs et centralisons la logique dâ€™affichage.

> Modifier **index.php** :
> 
> ```php
> <?php
> function render(string $view): void {
>     $file = __DIR__ . '/../views/' . $view . '.php';
>     if (file_exists($file)) {
>         include $file;
>     } else {
>         http_response_code(404);
>         include __DIR__ . '/../views/404.php';
>     }
> }
> 
> $uri = parse_url($_SERVER['REQUEST_URI'], PHP_URL_PATH);
> 
> switch ($uri) {
>     case '/':
>         render('home');
>         break;
>     case '/contact':
>         render('contact');
>         break;
>     case '/profil':
>         render('profil');
>         break;
>     default:
>         render('404');
> }
> ```

âœ… **RÃ©sultat :**

- Le code principal devient lisible.

- Les vues sont propres et modifiables indÃ©pendamment.

---

## ğŸ§  6. Petite question anticipÃ©e : *â€œEt Composer dans tout Ã§a ?â€*

TrÃ¨s bon rÃ©flexe ğŸ‘€  
Dans ce TP, **Composer nâ€™est pas nÃ©cessaire**, pour trois raisons :

| Raison                          | Explication                                                   |
| ------------------------------- | ------------------------------------------------------------- |
| 1ï¸âƒ£ Pas de classes              | Le code reste procÃ©dural, donc pas besoin dâ€™autoload.         |
| 2ï¸âƒ£ Pas de dÃ©pendances externes | On ne tÃ©lÃ©charge encore aucune bibliothÃ¨que.                  |
| 3ï¸âƒ£ Projet minimaliste          | Tout tient dans quelques fichiers ; Composer serait superflu. |

> ğŸ§© Composer reviendra dans les prochains TP,  
> dÃ¨s quâ€™on passera Ã  la **programmation orientÃ©e objet** (POO)  
> et quâ€™on crÃ©era des classes pour `Router`, `Controller`, `View`, etc.

---

## âš ï¸ 7. PiÃ¨ges frÃ©quents Ã  Ã©viter

| ProblÃ¨me                    | Cause                                           | Solution                                                          |
| --------------------------- | ----------------------------------------------- | ----------------------------------------------------------------- |
| Page blanche                | Mauvais chemin dâ€™inclusion                      | VÃ©rifier `__DIR__` et les `../`                                   |
| 404 alors que la vue existe | Erreur dans le nom du fichier ou dans `$routes` | Respecter la casse (Linux est sensible)                           |
| CSS non chargÃ©              | Fichier CSS mal rÃ©fÃ©rencÃ©                       | Corriger les chemins relatifs (ex: `/style.css` â†’ `../style.css`) |

---

## ğŸ’¡ 8. Astuces de pro

- Ajouter un fichier `views/layout.php` contenant le squelette HTML de base (header/footer).

- CrÃ©er une fonction `renderWithLayout($view, $title)` pour insÃ©rer le contenu dâ€™une vue dans le layout.

- Vous pouvez injecter des variables dans la vue via `extract($data)` avant le `include`.

---

## ğŸ§© 9. RÃ©sultat attendu

| URL        | Vue chargÃ©e   | RÃ©sultat           |
| ---------- | ------------- | ------------------ |
| `/`        | `home.php`    | Page dâ€™accueil     |
| `/contact` | `contact.php` | Page contact       |
| `/profil`  | `profil.php`  | Profil utilisateur |
| `/bidon`   | `404.php`     | Erreur 404         |




